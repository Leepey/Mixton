// src/features/about/utils/aboutUtils.ts
import type { FAQItem } from '../types/about.types';

/**
 * Ð¤Ð¾Ñ€Ð¼Ð°Ñ‚Ð¸Ñ€ÑƒÐµÑ‚ Ð´Ð°Ñ‚Ñƒ Ð´Ð»Ñ Ñ‚Ð°Ð¹Ð¼Ð»Ð°Ð¹Ð½Ð°
 */
export const formatTimelineDate = (date: string): string => {
  return date;
};

/**
 * Ð’Ð¾Ð·Ð²Ñ€Ð°Ñ‰Ð°ÐµÑ‚ Ð¸ÐºÐ¾Ð½ÐºÑƒ Ð´Ð»Ñ ÑÐ¾Ð±Ñ‹Ñ‚Ð¸Ñ Ñ‚Ð°Ð¹Ð¼Ð»Ð°Ð¹Ð½Ð°
 */
export const getTimelineIcon = (type: string): React.ReactNode => {
  const icons: Record<string, React.ReactNode> = {
    'inception': 'ðŸš€',
    'release': 'ðŸ”¬',
    'audit': 'ðŸ”’',
    'launch': 'ðŸŽ‰'
  };
  return icons[type] || 'ðŸ“…';
};

/**
 * Ð¤Ð¾Ñ€Ð¼Ð°Ñ‚Ð¸Ñ€ÑƒÐµÑ‚ Ñ‡Ð¸ÑÐ»Ð¾ Ð´Ð»Ñ ÑÑ‚Ð°Ñ‚Ð¸ÑÑ‚Ð¸ÐºÐ¸
 */
export const formatStatNumber = (num: number): string => {
  if (num >= 1000000) {
    return `${(num / 1000000).toFixed(1)}M`;
  }
  if (num >= 1000) {
    return `${(num / 1000).toFixed(1)}K`;
  }
  return num.toString();
};

/**
 * Ð’Ð¾Ð·Ð²Ñ€Ð°Ñ‰Ð°ÐµÑ‚ Ñ†Ð²ÐµÑ‚ Ð´Ð»Ñ ÐºÐ°Ñ‚ÐµÐ³Ð¾Ñ€Ð¸Ð¸ FAQ
 */
export const getFAQCategoryColor = (category: string): string => {
  const colors: Record<string, string> = {
    'General': 'primary',
    'Security': 'success',
    'Usage': 'info',
    'Fees': 'warning'
  };
  return colors[category] || 'default';
};

/**
 * Ð’Ð°Ð»Ð¸Ð´Ð¸Ñ€ÑƒÐµÑ‚ email
 */
export const validateEmail = (email: string): boolean => {
  const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
  return emailRegex.test(email);
};

/**
 * Ð¤Ð¾Ñ€Ð¼Ð°Ñ‚Ð¸Ñ€ÑƒÐµÑ‚ ÑÐ¾Ñ†Ð¸Ð°Ð»ÑŒÐ½ÑƒÑŽ ÑÑÑ‹Ð»ÐºÑƒ
 */
export const formatSocialLink = (platform: string, username: string): string => {
  const urls: Record<string, string> = {
    'github': `https://github.com/${username}`,
    'twitter': `https://twitter.com/${username}`,
    'linkedin': `https://linkedin.com/in/${username}`,
    'telegram': `https://t.me/${username}`
  };
  return urls[platform.toLowerCase()] || username;
};

/**
 * ÐŸÐ¾Ð»ÑƒÑ‡Ð°ÐµÑ‚ Ð¸Ð½Ð¸Ñ†Ð¸Ð°Ð»Ñ‹ Ð¸Ð· Ð¸Ð¼ÐµÐ½Ð¸
 */
export const getInitials = (name: string): string => {
  return name
    .split(' ')
    .map(word => word.charAt(0).toUpperCase())
    .join('')
    .slice(0, 2);
};

/**
 * ÐžÐ±Ñ€ÐµÐ·Ð°ÐµÑ‚ Ñ‚ÐµÐºÑÑ‚ Ð´Ð¾ ÑƒÐºÐ°Ð·Ð°Ð½Ð½Ð¾Ð¹ Ð´Ð»Ð¸Ð½Ñ‹
 */
export const truncateText = (text: string, maxLength: number): string => {
  if (text.length <= maxLength) {
    return text;
  }
  return text.slice(0, maxLength).trim() + '...';
};

/**
 * Ð“Ñ€ÑƒÐ¿Ð¿Ð¸Ñ€ÑƒÐµÑ‚ FAQ Ð¿Ð¾ ÐºÐ°Ñ‚ÐµÐ³Ð¾Ñ€Ð¸ÑÐ¼
 */
export const groupFAQByCategory = (items: FAQItem[]): Record<string, FAQItem[]> => {
  return items.reduce((acc, item) => {
    if (!acc[item.category]) {
      acc[item.category] = [];
    }
    acc[item.category].push(item);
    return acc;
  }, {} as Record<string, FAQItem[]>);
};

/**
 * Ð¤Ð¾Ñ€Ð¼Ð°Ñ‚Ð¸Ñ€ÑƒÐµÑ‚ Ð´Ð°Ñ‚Ñƒ Ð² Ð¾Ñ‚Ð½Ð¾ÑÐ¸Ñ‚ÐµÐ»ÑŒÐ½Ñ‹Ð¹ Ñ„Ð¾Ñ€Ð¼Ð°Ñ‚ (Ð½Ð°Ð¿Ñ€Ð¸Ð¼ÐµÑ€, "2 days ago")
 */
export const formatRelativeDate = (date: string | Date): string => {
  const now = new Date();
  const pastDate = typeof date === 'string' ? new Date(date) : date;
  const diffMs = now.getTime() - pastDate.getTime();
  const diffDays = Math.floor(diffMs / (1000 * 60 * 60 * 24));
  
  if (diffDays === 0) return 'today';
  if (diffDays === 1) return 'yesterday';
  if (diffDays < 7) return `${diffDays} days ago`;
  if (diffDays < 30) return `${Math.floor(diffDays / 7)} weeks ago`;
  if (diffDays < 365) return `${Math.floor(diffDays / 30)} months ago`;
  return `${Math.floor(diffDays / 365)} years ago`;
};

/**
 * ÐŸÑ€Ð¾Ð²ÐµÑ€ÑÐµÑ‚, ÑÐ²Ð»ÑÐµÑ‚ÑÑ Ð»Ð¸ URL Ð²Ð°Ð»Ð¸Ð´Ð½Ñ‹Ð¼
 */
export const isValidUrl = (url: string): boolean => {
  try {
    new URL(url);
    return true;
  } catch {
    return false;
  }
};

/**
 * Ð¤Ð¾Ñ€Ð¼Ð°Ñ‚Ð¸Ñ€ÑƒÐµÑ‚ Ñ‡Ð¸ÑÐ»Ð¾ Ñ Ñ€Ð°Ð·Ð´ÐµÐ»Ð¸Ñ‚ÐµÐ»ÑÐ¼Ð¸ Ñ‚Ñ‹ÑÑÑ‡
 */
export const formatNumber = (num: number): string => {
  return num.toLocaleString();
};

/**
 * Ð“ÐµÐ½ÐµÑ€Ð¸Ñ€ÑƒÐµÑ‚ ÑÐ»ÑƒÑ‡Ð°Ð¹Ð½Ñ‹Ð¹ ID
 */
export const generateId = (): string => {
  return Math.random().toString(36).substr(2, 9);
};

/**
 * ÐŸÑ€Ð¾Ð²ÐµÑ€ÑÐµÑ‚, ÑÐ²Ð»ÑÐµÑ‚ÑÑ Ð»Ð¸ ÑÑ‚Ñ€Ð¾ÐºÐ° Ð¿ÑƒÑÑ‚Ð¾Ð¹ Ð¸Ð»Ð¸ ÑÐ¾Ð´ÐµÑ€Ð¶Ð¸Ñ‚ Ñ‚Ð¾Ð»ÑŒÐºÐ¾ Ð¿Ñ€Ð¾Ð±ÐµÐ»Ñ‹
 */
export const isEmpty = (str: string): boolean => {
  return !str || str.trim().length === 0;
};

/**
 * ÐšÐ°Ð¿Ð¸Ñ‚Ð°Ð»Ð¸Ð·Ð¸Ñ€ÑƒÐµÑ‚ Ð¿ÐµÑ€Ð²ÑƒÑŽ Ð±ÑƒÐºÐ²Ñƒ ÑÑ‚Ñ€Ð¾ÐºÐ¸
 */
export const capitalize = (str: string): string => {
  return str.charAt(0).toUpperCase() + str.slice(1).toLowerCase();
};